From 59d711b8deae6aa53788ec6dc375f58cc5d7c3d1 Mon Sep 17 00:00:00 2001
From: Reilly Brogan <reilly@reillybrogan.com>
Date: Fri, 25 Nov 2022 15:06:28 -0600
Subject: [PATCH 1/1] Better follow FreeDesktop specification

---
 CMakeLists.txt             | 7 +------
 resources/nheko.desktop.in | 2 +-
 2 files changed, 2 insertions(+), 7 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index d8088376..8cbc54ff 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -760,12 +760,7 @@ endif()
 set_target_properties(nheko PROPERTIES CMAKE_SKIP_INSTALL_RPATH TRUE)
 
 if(UNIX AND NOT APPLE)
-	if(FLATPAK)
-		set(APPID "io.github.NhekoReborn.Nheko")
-		set_target_properties(nheko PROPERTIES OUTPUT_NAME "${APPID}")
-	else()
-		set(APPID "nheko")
-	endif()
+	set(APPID "io.github.NhekoReborn.Nheko")
 
 	install (TARGETS nheko RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}")
 	install (FILES "resources/nheko-16.png" DESTINATION "${CMAKE_INSTALL_DATAROOTDIR}/icons/hicolor/16x16/apps" RENAME "${APPID}.png")
diff --git a/resources/nheko.desktop.in b/resources/nheko.desktop.in
index ae0d788a..8cc7f8da 100644
--- a/resources/nheko.desktop.in
+++ b/resources/nheko.desktop.in
@@ -2,7 +2,7 @@
 Name=nheko
 Version=1.0
 Comment=Desktop client for Matrix
-Exec=@APPID@ %u
+Exec=nheko %u
 Icon=@APPID@
 Type=Application
 Categories=Network;InstantMessaging;Qt;
-- 
2.38.1

